<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Gliko â€” Dnevnik glukoze</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png" type="image/png"/>

  <!-- Font + Chart.js -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- â€œExcelâ€ tabovi na vrhu -->
  <nav class="tabs-bar">
    <button class="tab-btn active" data-tab="trend">Trendovi</button>
    <button class="tab-btn" data-tab="food">Ishrana</button>
    <button class="tab-btn" data-tab="therapy">Terapija</button>
  </nav>

  <main id="tabs-root">
    <!-- TAB: TRENDOVI -->
    <section id="tab-trend" class="tab-view active">
      <!-- naslov ispod skrivamo iz app.js  -->
      <header class="page-title"><h1>Trendovi</h1></header>

      <!-- Unos -->
      <div class="card form-card">
      <h3>Unesite vrednost Å¡eÄ‡era</h3>
        <div class="grid3">
          <div>
            <label>Datum</label>
            <input type="date" id="date">
          </div>
          <div>
            <label>Vreme</label>
            <input type="time" id="time">
          </div>
          <div>
            <label>Glukoza (mmol/L)</label>
            <input type="number" id="glucose" step="0.1" placeholder="npr. 5.8">
          </div>
        </div>
        <div class="mt8">
          <label>Komentar</label>
          <input type="text" id="comment" placeholder="kratka napomena (opciono)">
        </div>

        <!-- Emoji â€” 2 reda -->
        <div class="emoji-wrap">
          <div class="emoji-row">
            <label><input type="checkbox" value="ğŸ¥š"> ğŸ¥š</label>
            <label><input type="checkbox" value="ğŸŸ"> ğŸŸ</label>
            <label><input type="checkbox" value="ğŸ—"> ğŸ—</label>
            <label><input type="checkbox" value="ğŸ¥©"> ğŸ¥©</label>
            <label><input type="checkbox" value="ğŸ¥—"> ğŸ¥—</label>
          </div>
          <div class="emoji-row">
            <label><input type="checkbox" value="ğŸ"> ğŸ</label>
            <label><input type="checkbox" value="ğŸ°"> ğŸ°</label>
            <label><input type="checkbox" value="â˜•"> â˜•</label>
            <label><input type="checkbox" value="ğŸ¥¤"> ğŸ¥¤</label><!-- soda -->
            <label><input type="checkbox" value="ğŸ¥ƒ"> ğŸ¥ƒ</label><!-- Å¾estoko -->
            <label><input type="checkbox" value="ğŸ·"> ğŸ·</label><!-- vino -->
          </div>
        </div>

        <div class="actions">
          <button class="primary" id="btnAdd">â• Dodaj unos</button>
          <input type="file" id="fileInput" class="file">
          <button id="btnImport">ğŸ“¥ Import CSV</button>
          <button id="btnExport">ğŸ“¤ Export CSV</button>
          <button class="ghost" id="btnClear">ğŸ§¹ ObriÅ¡i sve</button>
        </div>
      </div>

      <!-- Stat kartice -->
      <div class="stats">
        <div class="stat prosek">
          <div class="label">Prosek</div>
          <div class="value" id="statAvg">â€”</div>
        </div>
        <div class="stat min">
          <div class="label">Min</div>
          <div class="value" id="statMin">â€”</div>
        </div>
        <div class="stat max">
          <div class="label">Maks</div>
          <div class="value" id="statMax">â€”</div>
        </div>
      </div>

      <!-- Filteri po zoni + period -->
      <div class="card">
        <h3>Filteri po dobu dana</h3>
        <div class="chip-row">
          <button class="chip" data-zone="jutro">ğŸŒ„ Jutro (06â€“09)</button>
          <button class="chip" data-zone="prepodne">ğŸŒ¤ï¸ Pre podne (09â€“12)</button>
          <button class="chip" data-zone="popodne">â˜€ï¸ Popodne (12â€“17)</button>
          <button class="chip" data-zone="vece">ğŸŒ‡ VeÄe (17â€“22)</button>
          <button class="chip" data-zone="noc">ğŸŒ™ NoÄ‡ (22â€“06)</button>
          <button class="chip ghost" data-zone="">ğŸ”„ PrikaÅ¾i sve</button>
        </div>

        <div class="date-range">
          <div>
            <label>PoÄetak</label>
            <input type="date" id="startDate">
          </div>
          <div>
            <label>Kraj</label>
            <input type="date" id="endDate">
          </div>
          <button id="btnApplyRange">âœ… Primeni period</button>
          <button id="btnResetRange" class="ghost">ğŸ”„ PoniÅ¡ti</button>
        </div>
      </div>

      <!-- Grafik -->
      <div class="card">
        <h4>Trend sa ukljuÄenim filterom</h4>
        <canvas id="glucoseChart" height="120"></canvas>
      </div>

      <!-- Tabela -->
      <div class="card">
        <h3>Vrednosti po filterima</h3>
        <table class="table" id="logTable">
          <thead>
            <tr><th>Datum</th><th>Vreme</th><th>Glukoza</th><th>Komentar</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- AI analiza -->
      <div class="ai-block">
        <button class="ai-btn" id="btnAI">ğŸ¤– AI analiza trendova</button>
        <small class="muted">Ovo nije medicinski savet.</small>
      </div>

      <!-- AI modal -->
      <div id="aiModal" class="modal" hidden>
        <div class="modal-content">
          <div class="modal-head">
            <h3>AI analiza trendova</h3>
            <button class="close" id="aiClose">âœ•</button>
          </div>
          <div id="aiBody" class="modal-body"></div>
        </div>
      </div>

      <!-- Analysis Modal (NEW) -->
      <div id="analysisModal" class="modal" hidden>
        <div class="modal-content">
          <div class="modal-head">
            <h3>Analiza Merenja</h3>
            <button class="close" onclick="closeModal()">âœ•</button>
          </div>
          <div class="modal-body">
            <p>Glukoza: <span id="glucoseValue"></span> mmol/L</p>
            <p>Period: <span id="timeOfDay"></span></p>
            <p id="trendText"></p>
          </div>
        </div>
      </div>

    </section>

      <!-- TAB: ISHRANA -->
    <section id="tab-food" class="tab-view">
      <!-- Reklama na vrhu -->
      <div class="advertisement">
        <img src="ad-image-url.jpg" alt="Reklama za zdravu hranu" />
        <p>Oglasi sponzora - Restoran zdrave hrane</p>
      </div>

      <!-- Pretraga recepata -->
      <div class="search-wrapper">
        <input type="text" id="recipe-search" placeholder="PretraÅ¾i recepte" />
      </div>

      <div class="tag-filters">
        <button class="chip">Low-GI</button>
        <button class="chip">Bez-glutena</button>
        <button class="chip">Veganski</button>
      </div>

      <div class="card form-card">
        <h3>Unesite novi recept</h3>
        <div class="grid3">
          <div>
            <label for="recipe-title">Naziv recepta</label>
            <input type="text" id="recipe-title" placeholder="Naziv recepta">
          </div>
          <div>
            <label for="recipe-image">Slika recepta</label>
            <input type="file" id="recipe-image">
          </div>
          <div>
            <label for="recipe-ingredients">Sastojci</label>
            <textarea id="recipe-ingredients" placeholder="Unesite sastojke"></textarea>
          </div>
        </div>
        <button id="submit-recipe" class="primary">Dodaj recept</button>
      </div>

      <div id="recipe-container" class="card">
        <h3>Recepti</h3>
        <div class="recipe-list">
          <!-- Ovdje Ä‡e biti prikazani recepti kroz JS -->
        </div>
      </div>
    </section>

  <script src="app.js"></script>

  <!-- Registracija service workera -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(()=>{});
      });
    }
  </script>
</body>

</html>



