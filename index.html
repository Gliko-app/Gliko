<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Gliko — Dnevnik glukoze</title>
  
  <!-- Link ka manifestu -->
  <link rel="manifest" href="manifest.json">

  <!-- Zajednički CSS -->
  <link rel="stylesheet" href="css/style.css"/>

  <style>
    .tab-view {
      display: none;  /* Skrivamo sve sekcije inicijalno */
    }

    .tab-view.active {
      display: block;  /* Prikazujemo aktivnu sekciju */
    }

    .tabs-bar {
      display: flex;
      gap: 1rem;
      padding: 0.5rem;
      background: #f0f0f0;
    }

    .tab-btn {
      padding: 0.5rem 1rem;
      cursor: pointer;
      background: #00b2b1;
      color: white;
      border: none;
      border-radius: 5px;
    }

    .tab-btn.active {
      background: #009a97;
    }
  </style>
</head>
<body>
  <!-- Tabovi -->
  <nav class="tabs-bar">
    <button class="tab-btn active" data-tab="trends">Trendovi</button>
    <button class="tab-btn" data-tab="food">Ishrana</button>
    <button class="tab-btn" data-tab="therapy">Terapija</button>
  </nav>

  <main id="tabs-root">
    <!-- TAB: TRENDS -->
    <section id="tab-trends" class="tab-view active">
      <!-- Dinamički iframe za trends -->
    </section>

    <!-- TAB: ISHRANA -->
    <section id="tab-food" class="tab-view">
      <!-- Dinamički iframe za food -->
    </section>

    <!-- TAB: TERAPIJA -->
    <section id="tab-therapy" class="tab-view">
      <!-- Dinamički iframe za therapy -->
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const tabs = document.querySelectorAll('.tab-btn');
      const sections = document.querySelectorAll('.tab-view');

      // Funkcija za dodavanje iframe-a za svaki tab
      function loadTabContent(tabName) {
        const section = document.getElementById(`tab-${tabName}`);
        
        // Dinamičko kreiranje iframe-a
        const iframe = document.createElement('iframe');
        iframe.src = `${tabName}/${tabName}.html`;
        iframe.style.width = '100%';
        iframe.style.height = '100vh';  // Možete prilagoditi visinu ako želite
        iframe.frameBorder = '0';
        
        // Dodavanje iframe-a unutar sekcije
        section.innerHTML = ''; // Očistiti prethodni sadržaj, ako postoji
        section.appendChild(iframe);
      }

      // Učitaj sadržaj za prvi tab (Trendovi)
      loadTabContent('trends');

      // Dodavanje funkcionalnosti za tabove
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Deaktiviraj sve tabove
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          // Prikazivanje odgovarajuće sekcije
          sections.forEach(section => {
            if (section.id === `tab-${tab.dataset.tab}`) {
              section.classList.add('active');
              if (!section.querySelector('iframe')) {  // Ako iframe nije već prisutan
                loadTabContent(tab.dataset.tab);  // Učitaj sadržaj za taj tab
              }
            } else {
              section.classList.remove('active');
            }
          });
        });
      });
    });
  </script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then((registration) => {
          console.log('Service Worker je registrovan sa opsegom:', registration.scope);
        })
        .catch((error) => {
          console.log('Neuspešna registracija Service Worker-a:', error);
        });
    });
  }
</script>

</body>
</html>

