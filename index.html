<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dnevnik glukoze v4</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <nav id="tabbar" class="tabbar">
    <button class="tablink active" data-tab="trend">ğŸ“ˆ Trendovi</button>
    <button class="tablink" data-tab="food">ğŸ½ï¸ Ishrana</button>
    <button class="tablink" data-tab="therapy">ğŸ’Š Terapija</button>
  </nav>
<main id="tabs-root">
<section id="tab-trend" class="tabview active">

  <header>
    <h1>Dnevnik glukoze v4</h1>
  </header>

  <section class="form-section">
    <div class="form-row">
      <input type="date" id="date" />
      <input type="time" id="time" />
    </div>

    <div class="form-row">
      <input type="number" id="glucose" placeholder="Glukoza (mmol/L)" step="0.1" />
      <select id="commentSelect" onchange="commentChanged()">
        <option value="">-- Odaberi komentar --</option>
        <option value="jutarnji">ğŸŒ… Jutarnji Å¡eÄ‡er</option>
        <option value="dorucak">ğŸ³ 1â€“2h posle doruÄka</option>
        <option value="rucak">ğŸ½ï¸ 1â€“2h posle ruÄka</option>
        <option value="vecera">ğŸŒ™ 1â€“2h posle veÄere</option>
        <option value="predvecera">ğŸ¥£ Pre veÄere</option>
        <option value="custom">âœï¸ Slobodan unos</option>
      </select>
      <input type="text" id="comment" placeholder="Komentar" style="display:none;" />
    </div>

    <div class="form-row">
      <label>Obrok:</label>
      <span class="emoji-select">
        <label><input type="checkbox" value="ğŸ¥š" />ğŸ¥š</label>
        <label><input type="checkbox" value="ğŸŸ" />ğŸŸ</label>
        <label><input type="checkbox" value="ğŸ–" />ğŸ–</label>
        <label><input type="checkbox" value="ğŸ" />ğŸ</label>
        <label><input type="checkbox" value="â˜•" />â˜•</label>
        <label><input type="checkbox" value="ğŸ¥—" />ğŸ¥—</label>
        <label><input type="checkbox" value="ğŸ·" />ğŸ·</label>
      </span>
    </div>

    <div class="form-row">
      <button onclick="addEntry()">â• Dodaj unos</button>
    </div>
  </section>

  <section class="filter-section">
    <h2>Filteri po zoni</h2>
    <div class="form-row">
      <button onclick="filterBy('jutro')">ğŸŒ„ Jutro (06â€“09)</button>
      <button onclick="filterBy('prepodne')">ğŸŒ¤ï¸ Pre podne (09â€“12)</button>
      <button onclick="filterBy('podne')">â˜€ï¸ Podne (12â€“17)</button>
      <button onclick="filterBy('vece')">ğŸŒ‡ VeÄe (17â€“22)</button>
      <button onclick="filterBy('noc')">ğŸŒ™ NoÄ‡ (22â€“06)</button>
      <button onclick="resetFilter()">ğŸ”„ PrikaÅ¾i sve</button>
    </div>
  </section>

  <section class="table-section">
    <table id="logTable">
      <thead>
        <tr>
          <th>Datum</th>
          <th>Vreme</th>
          <th>Glukoza</th>
          <th>Komentar</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="chart-section">
    <h2>ğŸ“ˆ Grafik</h2>
    <canvas id="glucoseChart" height="100"></canvas>
  </section>

  <section class="calendar-section">
    <h2>ğŸ“… Kalendar unosa</h2>
    <div id="calendar"></div>
  </section>

  <section class="action-buttons">
    <input type="file" id="fileInput" />
    <button onclick="importCSV()">ğŸ“¥ Import</button>
    <button onclick="exportCSV()">ğŸ“¤ Export</button>
    <button onclick="clearAll()">ğŸ§¹ ObriÅ¡i sve</button>
  </section>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3 id="modalTitle">Detalji za dan</h3>
      <canvas id="dayChart" height="100"></canvas>
      <ul id="dayEntries"></ul>
    </div>
  </div>

  </section>
<section id="tab-food" class="tabview" hidden>
  <header><h2>ğŸ½ï¸ Ishrana</h2></header>
  
  <div class="form-row">
    <input type="text" id="recTitle" placeholder="Naziv recepta" />
    <input type="number" id="recCarbs" placeholder="Ugljeni hidrati (g/porcija)" step="1" />
    <input type="text" id="recTags" placeholder="Tagovi (npr: doruÄak, low-GI)" />
    <button onclick="addRecipe()">â• Dodaj recept</button>
  </div>
  <div class="form-row">
    <input type="text" id="recQuery" placeholder="ğŸ” Pretraga po nazivu/tagovima" oninput="renderRecipes()" />
    <button onclick="seedRecipes()">ğŸŒ± Ubaci primere</button>
    <button onclick="exportRecipes()">ğŸ“¤ Export</button>
    <input type="file" id="recipesFile" />
    <button onclick="importRecipes()">ğŸ“¥ Import</button>
  </div>
  <ul id="recipesList" class="card-list"></ul>
        
</section>
<section id="tab-therapy" class="tabview" hidden>
  <header><h2>ğŸ’Š Terapija</h2></header>
  
  <div class="form-row">
    <input type="text" id="thName" placeholder="Naziv leka/aparata" />
    <input type="number" id="thDose" placeholder="Doza (npr. 500)" step="1" />
    <input type="text" id="thUnit" placeholder="Jedinica (mg, IU...)" />
    <input type="text" id="thTimes" placeholder="Vremena (npr. 08:00,20:00)" />
    <button onclick="addTherapy()">â• Dodaj terapiju</button>
  </div>
  <div class="form-row">
    <button onclick="seedTherapy()">ğŸŒ± Ubaci primere</button>
    <button onclick="exportTherapy()">ğŸ“¤ Export</button>
    <input type="file" id="therapyFile" />
    <button onclick="importTherapy()">ğŸ“¥ Import</button>
  </div>
  <ul id="therapyList" class="card-list"></ul>
        
</section>
</main>
<script src="app.js"></script>
  <script src="calendar.js"></script>
  <script src="modal.js"></script>
</body>
</html>